webpackJsonp([8],{"/9cc":function(t,e){},"5epR":function(t,e){},"7aTp":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("P9l9"),a={props:{versionRow:{type:Object,default:function(){}}},mounted:function(){this.versionRow&&(console.log(this.versionRow),this.getParentDate=this.versionRow)},data:function(){return{getParentDate:{}}},methods:{close:function(){this.$emit("close")}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:!0,width:"520px","close-on-press-escape":!1,"show-close":!1,"append-to-body":""}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"dialong-text"},[t._v("查看")]),t._v(" "),s("span",{staticClass:"el-icon-close i-close",on:{click:t.close}})]),t._v(" "),s("div",{staticClass:"check-content"},[s("div",{staticClass:"check-title"},[t._v("变更记录")]),t._v(" "),s("div",{staticClass:"check-text"},[t._v(t._s(t.getParentDate.msg))])]),t._v(" "),s("div",{staticClass:"send-confirm",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"save-btn",on:{click:t.close}},[t._v("确定")])])])},staticRenderFns:[]};var n={components:{checkVersion:s("VU/8")(a,o,!1,function(t){s("/9cc")},"data-v-eac764cc",null).exports},props:{publishRow:{type:Object,default:{}}},mounted:function(){console.log(this.publishRow),this.publishRow&&(this.getParentData=this.publishRow,this.getTableList(),this.getServerSet())},data:function(){return{chooseVersionKey:"",getParentData:{},param:{nodeGroup:""},nodeGroupList:[],versionList:[],showVersionDialog:!1,showVersionList:!1,selectedVersion:{},versionRow:{}}},methods:{getServerSet:function(){var t=this;this.getParentData&&null==this.getParentData.projectName||this.$post(i.a.jenkins.getServerGroups,{projectName:this.getParentData.projectName},function(e){e.success&&e.ServerGroups&&e.ServerGroups.length>0?t.nodeGroupList=e.ServerGroups:(t.$message.error(e.message),t.nodeGroupList=[])})},searchTable:function(){var t=this.chooseVersionKey;t&&this.versionList&&this.versionList.length>0?this.versionList=this.versionList.filter(function(e){if(e.changeSet.indexOf(t)>-1)return e}):this.getTableList()},versionDialogClose:function(){this.showVersionDialog=!1},statusFormatter:function(t){return"SUCCESS"==t.status?"成功":"失败"},getTableList:function(){var t=this;this.getParentData.projectName&&this.$post(i.a.jenkins.getJobNameBuilldInfo,{jobName:this.getParentData.projectName},function(e){e.success?(console.log(e),t.versionList=e.buildTasksList,console.log(t.versionList)):t.$message.error(e.message)})},close:function(){this.$emit("close"),this.chooseVersionKey="",this.nodeGroupList=[],this.param.nodeGroup="",this.selectedVersion={}},send:function(){var t=this,e={};e.svnVersion=this.$data.selectedVersion.changeSet,e.jobName=this.getParentData.projectName,e.tarGet=this.param.nodeGroup,e.number=Number(this.getParentData.version),""!=e.svnVersion?null!=e.jobName?""!=e.tarGet?null!=e.number?this.$post(i.a.jenkins.projectReleased,e,function(e){e.success?(t.$message.success(e.message),t.chooseVersionKey="",t.nodeGroupList=[],t.param.nodeGroup="",t.selectedVersion={}):t.$message.error(e.message)}):this.$message.warning("构建ID不能为空！"):this.$message.warning("服务器群组不能为空！"):this.$message.warning("项目名不能为空！"):this.$message.warning("修正版本号不能为空！")},handleOpenVersion:function(t){this.$data.showVersionDialog=!0,this.versionRow=t},versionTableChange:function(t){if(t.length>=2)return this.$refs.versionTable.clearSelection(),this.$refs.versionTable.toggleRowSelection(t[t.length-1]),void(this.$data.selectedVersion=t[t.length-1]);1!=t.length?0!=t.length||(this.$data.selectedVersion={}):this.$data.selectedVersion=t[t.length-1]}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:!0,width:"980px","close-on-press-escape":!1,"show-close":!1,"append-to-body":""}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"dialong-text"},[t._v("发布")]),t._v(" "),s("span",{staticClass:"el-icon-close i-close",on:{click:t.close}})]),t._v(" "),s("div",{staticClass:"publist-content"},[s("div",{staticClass:"select-version"},[s("div",{staticClass:"version-head version-flex"},[s("span",{staticClass:"version-headtitle"},[t._v("选择版本")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.chooseVersionKey,expression:"chooseVersionKey"}],staticClass:"version-ipt",attrs:{placeholder:"请选择"},domProps:{value:t.chooseVersionKey},on:{input:[function(e){e.target.composing||(t.chooseVersionKey=e.target.value)},t.searchTable]}}),t._v(" "),s("span",{staticClass:"el-icon-circle-plus-outline show-icon",attrs:{title:"展开/折叠版本"},on:{click:function(e){t.showVersionList=!t.showVersionList}}})]),t._v(" "),s("div",{staticClass:"hidden-area"},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showVersionList,expression:"showVersionList"}],staticClass:"select-content"},[s("el-table",{ref:"versionTable",staticStyle:{width:"100%"},attrs:{data:t.versionList,border:"",height:"441"},on:{select:t.versionTableChange}},[s("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),s("el-table-column",{attrs:{prop:"changeSet",label:"修正版本号","min-width":"110"}}),t._v(" "),s("el-table-column",{attrs:{prop:"latelyTime",label:"构建时间","min-width":"110"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"静态代码审核","min-width":"120",formatter:t.statusFormatter}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"单元测试结果","min-width":"120",formatter:t.statusFormatter}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"验证测试结果","min-width":"120",formatter:t.statusFormatter}}),t._v(" "),s("el-table-column",{attrs:{prop:"msg",label:"变更记录","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"check-btn",attrs:{title:"查看"},on:{click:function(s){return t.handleOpenVersion(e.row)}}},[t._v("查看")])]}}])})],1)],1)])],1)]),t._v(" "),s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("发布类型")]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"record-title",staticStyle:{width:"130px"}},[t._v("服务器群组设置：")]),t._v(" "),s("el-select",{staticClass:"version-select",attrs:{placeholder:"请选择",clearable:""},model:{value:t.param.nodeGroup,callback:function(e){t.$set(t.param,"nodeGroup",e)},expression:"param.nodeGroup"}},t._l(t.nodeGroupList,function(t,e){return s("el-option",{key:e,attrs:{label:t.host,value:t.host}})}),1)],1)])]),t._v(" "),s("div",{staticClass:"send-confirm",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"cancel-btn",on:{click:t.close}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"save-btn",on:{click:t.send}},[t._v("确定")])]),t._v(" "),t.showVersionDialog?s("check-version",{attrs:{versionRow:t.versionRow},on:{close:t.versionDialogClose}}):t._e()],1)},staticRenderFns:[]};var r=s("VU/8")(n,l,!1,function(t){s("Jkh+")},null,null).exports,c={props:{checkedRow:{type:Object,default:function(){}}},data:function(){return{reviewResult:!1,checkParentRow:{}}},mounted:function(){console.log(this.checkedRow),this.checkedRow&&(this.checkParentRow=this.checkedRow)},methods:{auditIdFormatter:function(t){return 1==t?"待发布":2==t?"待审核":3==t?"待部署":4==t?"已部署":0===t?"审核未通过":void 0},statusFormatter:function(t){return"SUCCESS"==t?"成功":"失败"},close:function(){this.$emit("close")}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:!0,width:"980px","close-on-press-escape":!1,"show-close":!1,"append-to-body":""}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"dialong-text"},[t._v("查看")]),t._v(" "),s("span",{staticClass:"el-icon-close i-close",on:{click:t.close}})]),t._v(" "),s("div",{staticClass:"publist-content"},[s("div",{staticClass:"version-mess"},[s("div",{staticClass:"version-head"},[t._v("修正版本信息")]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"version-title"},[t._v("项目名称：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.checkParentRow.projectName))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("修正版本号：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.checkParentRow.changeSet))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("最新构建时间：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.checkParentRow.newBulidDate))])]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"version-title"},[t._v("静态代码审核：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.checkParentRow.status)))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("单元测试结果：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.checkParentRow.status)))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("验证测试结果：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.checkParentRow.status)))])])]),t._v(" "),s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("变更记录")]),t._v(" "),s("div",{staticClass:"record-content"},[s("div",{staticClass:"record-wrap"},[t._v("\n          "+t._s(t.checkParentRow.msg)+"\n        ")])])]),t._v(" "),3==t.checkParentRow.auditId||2==t.checkParentRow.auditId?s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("发布类型")]),t._v(" "),s("div",{staticClass:"record-item"},[s("span",{staticClass:"record-title"},[t._v("灰度发布：")]),t._v(" "),s("div",{staticClass:"record-list"},t._l(10,function(e,i){return s("span",{key:i,staticClass:"record-value"},[t._v("192.168.21.28")])}),0)])]):t._e(),t._v(" "),3==t.checkParentRow.auditId?s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("审核")]),t._v(" "),s("div",{staticClass:"review-item review-result"},[s("span",{staticClass:"record-title"},[t._v("是否通过：")]),t._v(" "),s("span",{class:t.reviewResult?"record-value review-pass":"record-value review-nopass"},[t._v(t._s(t.auditIdFormatter(this.checkParentRow.auditId)))])]),t._v(" "),s("div",{staticClass:"review-item"},[s("span",{staticClass:"record-title"},[t._v("审核意见：")]),t._v(" "),s("div",[t._v(t._s(t.checkParentRow.remark))])])]):t._e()])])},staticRenderFns:[]};var d=s("VU/8")(c,v,!1,function(t){s("hieA")},null,null).exports,u={props:{reviewRow:{type:Object,default:{}}},mounted:function(){console.log(this.reviewRow),this.reviewRow&&(this.getParentData=this.reviewRow)},data:function(){return{opinions:"",getParentData:{},reviewResult:"3"}},methods:{auditIdFormatter:function(t){return 1==t?"待发布":2==t?"待审核":3==t?"待部署":4==t?"已部署":0===t?"审核未通过":void 0},statusFormatter:function(t){return"SUCCESS"==t?"成功":"失败"},close:function(){this.$emit("close")},send:function(){var t=this,e={};e.projectName=this.getParentData.projectName?this.getParentData.projectName:null,e.changeSet=this.getParentData.changeSet,e.auditId=this.reviewResult,e.remark=this.opinions,console.log(e),this.$post(i.a.jenkins.updateAuditInfo,e,function(e){e.success?(t.$message.success(e.message),t.$emit("close"),t.opinions=""):t.$message.error(e.message)})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:!0,width:"980px","close-on-press-escape":!1,"show-close":!1,"append-to-body":""}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"dialong-text"},[t._v("审核")]),t._v(" "),s("span",{staticClass:"el-icon-close i-close",on:{click:t.close}})]),t._v(" "),s("div",{staticClass:"publist-content"},[s("div",{staticClass:"version-mess"},[s("div",{staticClass:"version-head"},[t._v("修正版本信息")]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"version-title"},[t._v("项目名称：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.getParentData.projectName))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("修正版本号：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.getParentData.changeSet))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("最新构建时间：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.getParentData.newBulidDate))])]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"version-title"},[t._v("静态代码审核：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.getParentData.status)))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("单元测试结果：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.getParentData.status)))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("验证测试结果：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.getParentData.status)))])])]),t._v(" "),s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("变更记录")]),t._v(" "),s("div",{staticClass:"record-content"},[t._v("\n        "+t._s(t.getParentData.msg)+"\n      ")])]),t._v(" "),s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("发布类型")]),t._v(" "),s("div",{staticClass:"record-item"},[s("span",{staticClass:"record-title"},[t._v("灰度发布：")]),t._v(" "),s("div",{staticClass:"record-list"},t._l(10,function(e,i){return s("span",{key:i,staticClass:"record-value"},[t._v("192.168.21.28")])}),0)])]),t._v(" "),s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("审核")]),t._v(" "),s("div",{staticClass:"record-item"},[s("span",{staticClass:"record-title"},[t._v("是否通过：")]),t._v(" "),s("el-radio-group",{model:{value:t.reviewResult,callback:function(e){t.reviewResult=e},expression:"reviewResult"}},[s("el-radio",{attrs:{label:"3"}},[t._v("通过")]),t._v(" "),s("el-radio",{attrs:{label:"0"}},[t._v("不通过")])],1)],1),t._v(" "),s("div",{staticClass:"record-item"},[s("span",{staticClass:"record-title"},[t._v("审核意见：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.opinions,expression:"opinions"}],staticClass:"record-textarea",domProps:{value:t.opinions},on:{input:function(e){e.target.composing||(t.opinions=e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"send-confirm",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"cancel-btn",on:{click:t.close}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"save-btn",on:{click:t.send}},[t._v("确定")])])])},staticRenderFns:[]};var p=s("VU/8")(u,h,!1,function(t){s("TZDx")},null,null).exports,m={props:{deployRow:{type:Object,default:{}}},mounted:function(){console.log(this.deployRow),this.deployRow&&(this.reviewParentRow=this.deployRow)},data:function(){return{reviewResult:!1,reviewParentRow:{}}},methods:{auditIdFormatter:function(t){return 1==t?"待发布":2==t?"待审核":3==t?"待部署":4==t?"已部署":0===t?"审核未通过":void 0},statusFormatter:function(t){return"SUCCESS"==t?"成功":"失败"},close:function(){this.$emit("close")},send:function(){var t=this;this.reviewParentRow.projectName&&this.$post(i.a.jenkins.jobBuildInfo,{jobName:this.reviewParentRow.projectName,number:this.reviewParentRow.version},function(e){e.success?(t.$message.success(e.message),t.$emit("close")):t.$message.error(e.message)})}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:!0,width:"980px","close-on-press-escape":!1,"show-close":!1,"append-to-body":""}},[s("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"dialong-text"},[t._v("部署")]),t._v(" "),s("span",{staticClass:"el-icon-close i-close",on:{click:t.close}})]),t._v(" "),s("div",{staticClass:"publist-content"},[s("div",{staticClass:"version-mess"},[s("div",{staticClass:"version-head"},[t._v("修正版本信息")]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"version-title"},[t._v("项目名称：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.reviewParentRow.projectName))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("修正版本号：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.reviewParentRow.changeSet))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("最新构建时间：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.reviewParentRow.newBulidDate))])]),t._v(" "),s("div",{staticClass:"version-item"},[s("span",{staticClass:"version-title"},[t._v("静态代码审核：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.reviewParentRow.status)))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("单元测试结果：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.reviewParentRow.status)))]),t._v(" "),s("span",{staticClass:"version-title"},[t._v("验证测试结果：")]),t._v(" "),s("span",{staticClass:"version-value"},[t._v(t._s(t.statusFormatter(t.reviewParentRow.status)))])])]),t._v(" "),s("div",{staticClass:"change-record"},[s("div",{staticClass:"version-head"},[t._v("变更记录")]),t._v(" "),s("div",{staticClass:"record-content"},[t._v("\n         "+t._s(this.reviewParentRow.msg)+"\n        ")])])]),t._v(" "),s("div",{staticClass:"send-confirm",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"cancel-btn",on:{click:t.close}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"save-btn",on:{click:t.send}},[t._v("确定")])])])},staticRenderFns:[]};var g={components:{publishCom:r,checkCom:d,reviewCom:p,deployCom:s("VU/8")(m,_,!1,function(t){s("FXDk")},null,null).exports},data:function(){return{projectNameSearch:"",BuildTime:[],AuditTime:[],todoData:[],todoDataInitSave:[],todoTableTotalInit:0,pagination:{page:1,size:10,total:30},showPublishDialog:!1,showCheckDialog:!1,showReviewDialog:!1,showdeployDialog:!1,checkedRow:{},publishRow:{},deployRow:{},reviewRow:{}}},mounted:function(){this.getInit()},methods:{publishDialogClose:function(){this.showPublishDialog=!1,this.getInit()},deployDialogClose:function(){this.showdeployDialog=!1,this.getInit()},reviewDialogClose:function(){this.showReviewDialog=!1,this.getInit()},checkDialogClose:function(){this.showCheckDialog=!1},auditIdFormatter:function(t){return 1==t.auditId?"待发布":2==t.auditId?"待审核":3==t.auditId?"待部署":4==t.auditId?"已部署":0===t.auditId?"审核未通过":void 0},tableSearch:function(){var t=this;if(this.BuildTime=null==this.BuildTime?[]:this.BuildTime,this.AuditTime=null==this.AuditTime?[]:this.AuditTime,console.log("this.projectNameSearch:"+this.projectNameSearch,"this.BuildTime:"+this.BuildTime,"this.AuditTime:"+this.AuditTime),this.todoDataInitSave&&this.todoDataInitSave.length>0){if(""==this.projectNameSearch&&this.BuildTime&&0==this.BuildTime.length&&this.AuditTime&&0==this.AuditTime.length)return this.todoData=this.todoDataInitSave,this.pagination.total=this.todoTableTotalInit,void console.log("eight");this.todoData=this.todoDataInitSave.filter(function(e){if(""!=t.projectNameSearch&&t.BuildTime&&0==t.BuildTime.length&&t.AuditTime&&0==t.AuditTime.length){if(e.projectName&&e.projectName.indexOf(t.projectNameSearch)>-1)return console.log("first"),e}else if(""==t.projectNameSearch&&t.BuildTime&&t.BuildTime.length>0&&t.AuditTime&&0==t.AuditTime.length){var s=new Date(t.BuildTime[0]+" 00:00:00").getTime(),i=new Date(t.BuildTime[1]+" 23:59:59").getTime();if(e.latelyTime&&e.latelyTime>=s&&e.latelyTime<=i)return console.log("second"),e}else if(""==t.projectNameSearch&&t.BuildTime&&0==t.BuildTime.length&&t.AuditTime&&t.AuditTime.length>0){var a=new Date(t.AuditTime[0]+" 00:00:00").getTime(),o=new Date(t.AuditTime[1]+" 23:59:59").getTime();if(e.auditTime&&e.auditTime>=a&&e.auditTime<=o)return console.log("three"),e}else if(""!=t.projectNameSearch&&t.BuildTime&&t.BuildTime.length>0&&t.AuditTime&&0==t.AuditTime.length){var n=new Date(t.BuildTime[0]+" 00:00:00").getTime(),l=new Date(t.BuildTime[1]+" 23:59:59").getTime();if(e.projectName&&e.projectName.indexOf(t.projectNameSearch)>-1&&e.latelyTime&&e.latelyTime>=n&&e.latelyTime<=l)return console.log("four"),e}else if(""!=t.projectNameSearch&&t.BuildTime&&0==t.BuildTime.length&&t.AuditTime&&t.AuditTime.length>0){var r=new Date(t.AuditTime[0]+" 00:00:00").getTime(),c=new Date(t.AuditTime[1]+" 23:59:59").getTime();if(e.projectName&&e.projectName.indexOf(t.projectNameSearch)>-1&&e.auditTime&&e.auditTime>=r&&e.auditTime<=c)return console.log("five"),e}else if(""==t.projectNameSearch&&t.BuildTime&&t.BuildTime.length>0&&t.AuditTime&&t.AuditTime.length>0){var v=new Date(t.BuildTime[0]+" 00:00:00").getTime(),d=new Date(t.BuildTime[1]+" 23:59:59").getTime(),u=new Date(t.AuditTime[0]+" 00:00:00").getTime(),h=new Date(t.AuditTime[1]+" 23:59:59").getTime();if(console.log(e.auditTime,u,h),e.latelyTime&&e.latelyTime>=v&&e.latelyTime<=d&&e.auditTime&&e.auditTime>=u&&e.auditTime<=h)return console.log("six"),e}else if(""!=t.projectNameSearch&&t.BuildTime&&t.BuildTime.length>0&&t.AuditTime&&t.AuditTime.length>0){var p=new Date(t.BuildTime[0]+" 00:00:00").getTime(),m=new Date(t.BuildTime[1]+" 23:59:59").getTime(),_=new Date(t.AuditTime[0]+" 00:00:00").getTime(),g=new Date(t.AuditTime[1]+" 23:59:59").getTime();if(e.projectName&&e.projectName.indexOf(t.projectNameSearch)>-1&&e.latelyTime&&e.latelyTime>=p&&e.latelyTime<=m&&e.auditTime&&e.auditTime>=_&&e.auditTime<=g)return console.log("seven"),e}}),this.pagination.total=this.todoData.length,console.log(this.todoData)}},getInit:function(){var t=this;this.$post(i.a.jenkins.getUntreatedTaskList,{currPage:this.pagination.page,pageSize:this.pagination.size},function(e){e.success?(t.todoData=e.buildTasks,t.todoDataInitSave=e.buildTasks,t.pagination.total=Number(e.BuildTaskCount),t.todoTableTotalInit=Number(e.BuildTaskCount),console.log(e)):(t.$message.warning(e.message),t.todoData=[],t.todoDataInitSave=[],t.todoTableTotalInit=0)})},handleCurrentChange:function(t){this.$data.pagination.page=t,this.getInit()},handleOpenPublish:function(t){this.$data.showPublishDialog=!0,this.publishRow=t,console.log(this.publishRow)},handleOpenCheck:function(t){this.$data.showCheckDialog=!0,this.checkedRow=t,console.log(this.checkedRow)},handleOpenReview:function(t){this.$data.showReviewDialog=!0,this.reviewRow=t,console.log(this.reviewRow)},handleOpenDeploy:function(t){this.$data.showdeployDialog=!0,this.deployRow=t,console.log(this.deployRow)}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"todo-page"},[s("div",{staticClass:"todo-content"},[s("div",{staticClass:"todo-head"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.projectNameSearch,expression:"projectNameSearch"}],staticClass:"todo-ipt",attrs:{type:"text",placeholder:"请输入项目名称"},domProps:{value:t.projectNameSearch},on:{input:function(e){e.target.composing||(t.projectNameSearch=e.target.value)}}}),t._v(" "),s("el-date-picker",{staticClass:"todo-date",attrs:{type:"daterange","range-separator":"至","start-placeholder":"构建时间起","end-placeholder":"构建时间止","value-format":"yyyy-MM-dd"},model:{value:t.BuildTime,callback:function(e){t.BuildTime=e},expression:"BuildTime"}}),t._v(" "),s("el-date-picker",{staticClass:"todo-date",attrs:{type:"daterange","range-separator":"至","start-placeholder":"审核时间起","end-placeholder":"审核时间止","value-format":"yyyy-MM-dd"},model:{value:t.AuditTime,callback:function(e){t.AuditTime=e},expression:"AuditTime"}}),t._v(" "),s("span",{staticClass:"iconfont i-search",on:{click:t.tableSearch}},[t._v("")])],1),t._v(" "),s("div",{staticClass:"todo-area"},[s("el-scrollbar",{staticClass:"test-scroll"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.todoData,border:""}},[s("el-table-column",{attrs:{prop:"projectName",label:"项目名称","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"changeSet",label:"修正版本号","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"newBulidDate",label:"最新构建时间","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"durationTime",label:"上次持续时间","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"winDate",label:"上次构建成功","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"bulidLoserDate",label:"上次构建失败","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.bulidLoserDate?e.row.bulidLoserDate:"无")+"\n            ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"auditId",label:"状态","min-width":"100",formatter:t.auditIdFormatter}}),t._v(" "),s("el-table-column",{attrs:{prop:"operate",label:"操作","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.auditId?[s("button",{staticClass:"check-btn",on:{click:function(s){return t.handleOpenCheck(e.row)}}},[t._v("查看")]),t._v(" "),s("button",{staticClass:"publish-btn",on:{click:function(s){return t.handleOpenPublish(e.row)}}},[t._v("发布")])]:t._e(),t._v(" "),3==e.row.auditId?[s("button",{staticClass:"check-btn",on:{click:function(s){return t.handleOpenCheck(e.row)}}},[t._v("查看")]),t._v(" "),s("button",{staticClass:"deploy-btn",on:{click:function(s){return t.handleOpenDeploy(e.row)}}},[t._v("部署")])]:t._e(),t._v(" "),2==e.row.auditId?[s("button",{staticClass:"check-btn",on:{click:function(s){return t.handleOpenCheck(e.row)}}},[t._v("查看")]),t._v(" "),s("button",{staticClass:"review-btn",on:{click:function(s){return t.handleOpenReview(e.row)}}},[t._v("审核")])]:t._e()]}}])})],1),t._v(" "),s("div",{staticClass:"pagination-page"},[s("div",{staticClass:"pagination-left"},[s("el-pagination",{attrs:{"current-page":t.pagination.page,"page-size":t.pagination.size,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),s("div",{staticClass:"pagination-right"},[t._v("\n            当前显示"+t._s((t.pagination.page-1)*t.pagination.size+1)+"-"+t._s((t.pagination.page-1)*t.pagination.size+t.todoData.length)+"条记录 "),s("span",[t._v("共"+t._s(t.pagination.total)+"条记录")])])])],1)],1)]),t._v(" "),t.showPublishDialog?s("publish-com",{attrs:{publishRow:t.publishRow},on:{close:t.publishDialogClose}}):t._e(),t._v(" "),t.showCheckDialog?s("check-com",{attrs:{checkedRow:t.checkedRow},on:{close:t.checkDialogClose}}):t._e(),t._v(" "),t.showReviewDialog?s("review-com",{attrs:{reviewRow:t.reviewRow},on:{close:t.reviewDialogClose}}):t._e(),t._v(" "),t.showdeployDialog?s("deploy-com",{attrs:{deployRow:t.deployRow},on:{close:t.deployDialogClose}}):t._e()],1)},staticRenderFns:[]};var C=s("VU/8")(g,w,!1,function(t){s("5epR")},"data-v-4ec6673e",null);e.default=C.exports},FXDk:function(t,e){},"Jkh+":function(t,e){},TZDx:function(t,e){},hieA:function(t,e){}});