webpackJsonp([29],{JRYW:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("P9l9"),i=s("mQwn"),r=s.n(i),n=s("zE6V"),l=s.n(n),o={computed:{getIpNameOBJ:function(){return this.$store.state.ipNameOBJ}},watch:{getIpNameOBJ:function(t){console.log("watch"),console.log(t),t&&(this.getConnections(),this.getNetwork())}},mounted:function(){this.getConnections(),this.getNetwork()},created:function(){for(var t=this.$data.nodeImgData,e=0;e<t.length;e++)for(var s=0;s<t[e].serverList.length;s++)s==t[e].serverList.length-1?t[e].serverList[s].status&&t[e].serverList[0].status?t[e].serverList[s].connectStatus=!0:t[e].serverList[s].connectStatus=!1:t[e].serverList[s].status&&t[e].serverList[s+1].status?t[e].serverList[s].connectStatus=!0:t[e].serverList[s].connectStatus=!1},data:function(){return{showDetail:!1,worldImg:"url("+s("uC/s")+")",nodeImgData:[{name:"广州",serverList:[{id:1,runing:!0},{id:1,runing:!1},{id:1,runing:!0}]},{name:"上海",serverList:[{id:1,runing:!1},{id:1,runing:!0},{id:1,runing:!0}]}],serverRunImg:r.a,serverUnRunImg:l.a,bridgeTable:[],defaultArea:"gz",nodeData:[]}},methods:{handleShowDetail:function(t,e){var s=this.nodeImgData.filter(function(t){if("gz"!=t.area)return t.serverList}),a=0,i={ip:t.serverList[e].ip,brokerName:t.serverList[e].brokerName};console.log("imgIpName",i),this.$router.push({name:"/activemq/queue"}),this.$store.commit("changeIpName",i),this.$store.commit("changeActiveTab","/activemq/queue"),a="gz"!=t.area?e:e+s[0].serverList.length,this.$store.commit("changeNodeValue",a)},getConnections:function(){var t=this,e={ip:this.$store.state.ipNameOBJ.ip,brokerName:this.$store.state.ipNameOBJ.brokerName};console.log("ip:"+this.$store.state.ipNameOBJ.ip,"brokerName:"+this.$store.state.ipNameOBJ.brokerName),this.$post(a.a.activemq.sendHome,e,function(e){if(e.success){for(var s=0;s<e.data.length;s++)t.$data.defaultArea==e.data[s].area&&(t.$data.nodeData=e.data[s].serverList);t.nodeImgData=e.data}else t.$message.error("获取集群信息失败！")})},getNetwork:function(){var t=this,e={ip:this.$store.state.ipNameOBJ.ip,brokerName:this.$store.state.ipNameOBJ.brokerName};this.$post(a.a.activemq.sendNetwork,e,function(e){e.success?t.bridgeTable=e.netList:t.$message.error(e.message)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bridge-page"},[s("div",{staticClass:"node-img",style:{backgroundImage:t.worldImg}},[t._m(0),t._v(" "),s("div",{staticClass:"node-list"},[t._l(t.nodeImgData,function(e,a){return[s("div",{key:a+"server",staticClass:"node-item",on:{click:function(e){t.showDetail=!t.showDetail}}},[s("div",{staticClass:"node-address"},[t._v(t._s("gz"==e.area?"广州":"上海"))]),t._v(" "),s("div",{staticClass:"nodeimg-content"},[t._l(e.serverList,function(a,i){return[s("div",{key:i+"img",class:"nodeimg"+i,on:{click:function(s){return t.handleShowDetail(e,i)}}},[s("div",{staticClass:"server-name"},[t._v(t._s(a.name))]),t._v(" "),s("el-tooltip",{attrs:{placement:"right",effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("名称：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(a.brokerName))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("版本：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(a.version))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("ID：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(a.home_id))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("启动时间：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(a.uptime))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("创建时间：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(a.creation_time))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("存储使用百分比:")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(parseInt(a.store_percent_used)))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("内存使用百分比：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(parseInt(a.memory_percent_used)))])]),t._v(" "),s("div",{staticClass:"tip-item"},[s("span",{staticClass:"tip-title"},[t._v("临时文件使用百分比：")]),t._v(" "),s("span",{staticClass:"tip-value"},[t._v(t._s(parseInt(a.temp_percent_used)))])])]),t._v(" "),s("img",{attrs:{src:"true"==a.status?t.serverRunImg:t.serverUnRunImg}})])],1),t._v(" "),s("div",{key:i+"line",class:"nodeimg-line"+i,style:"true"==a.status?"background:green;":"background:red;"})]})],2)]),t._v(" "),a!=t.nodeImgData.length-1?s("div",{key:a+"line",staticClass:"node-line"}):t._e()]})],2)]),t._v(" "),s("div",{staticClass:"bridge-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bridgeTable,border:""}},[s("el-table-column",{attrs:{prop:"brokerName",label:"远程broker","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"address",label:"远程地址","min-width":"140"}}),t._v(" "),s("el-table-column",{attrs:{prop:"duplex",label:"Created By Duplex","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"enqueueCounter",label:"消息入队","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"dequeueCounter",label:"消息出队","min-width":"120"}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-content"},[e("span",{staticClass:"head-title"},[this._v("网桥拓扑图")])])}]};var v=s("VU/8")(o,c,!1,function(t){s("VhUr")},"data-v-7d3fa446",null);e.default=v.exports},VhUr:function(t,e){}});