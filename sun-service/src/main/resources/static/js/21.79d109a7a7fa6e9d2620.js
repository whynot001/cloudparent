webpackJsonp([21],{D6CZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("P9l9"),s=a("XLwt"),n=a.n(s),r={props:{height:{type:[Number,String],default:450},width:{type:[Number,String],default:300},id:[String],echartsData:[Object]},mounted:function(){this.drawCharts()},data:function(){return{}},methods:{drawCharts:function(){var t=null;t=window.ActiveXObject||"ActiveXObject"in window?n.a.init(document.getElementById(this.id)):n.a.init(document.getElementById(this.id),null,{renderer:"svg"});for(var e=[],a=[],i=0,s=0;s<this.echartsData.series.length;s++){e.push(this.echartsData.series[s].title);var r={};r.name=this.echartsData.series[s].title,r.type="line",r.data=this.echartsData.series[s].data,r.smooth=!0,a.push(r);for(var o=0;o<this.echartsData.series[s].data.length;o++)this.echartsData.series[s].data[o]>i&&(i=this.echartsData.series[s].data[o])}i=parseInt(2*i),t.setOption({title:{text:this.echartsData.title,top:10,left:60,bottom:40,textStyle:{color:"#333333",fontSize:16,fontWeight:"normal"}},color:["#33ADEE","#F6B359","#8FCA82","#A1539C","#24acf2"],tooltip:{trigger:"axis"},legend:{bottom:15,data:e,textStyle:{fontSize:14}},yAxis:{type:"value",max:i},xAxis:{type:"category",data:this.echartsData.xAxis},series:a})}}},o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{width:this.width+"px",height:this.height+"px"},attrs:{id:this.id}})},staticRenderFns:[]};var l=a("VU/8")(r,o,!1,function(t){a("z6HW")},"data-v-441386c0",null).exports,c={props:{height:{type:[Number,String],default:320},width:{type:[Number,String],default:300},id:[String],echartsData:[Object]},mounted:function(){},methods:{drawCharts:function(){(window.ActiveXObject||"ActiveXObject"in window?n.a.init(document.getElementById(this.id)):n.a.init(document.getElementById(this.id),null,{renderer:"svg"})).setOption({title:{text:this.echartsData.title,top:10,left:20,bottom:40,textStyle:{color:"#333333",fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis"},xAxis:{type:"category",data:this.echartsData.xAxis},yAxis:{type:"value",show:!1,axisLabel:{formatter:"{value}次"}},series:[{data:this.echartsData.series[0].data,type:"bar",smooth:!0,symbolSize:10,itemStyle:{color:new n.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#1CA4DC"},{offset:1,color:"#8C94F2"}]),barBorderRadius:[10,10,0,0]},barWidth:20,label:{show:!0,position:"top",distance:10,color:"#333333",fontSize:"12"}}]})}}},h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{width:this.width+"px",height:this.height+"px"},attrs:{id:this.id}})},staticRenderFns:[]},u={components:{newProject:l,projectCount:a("VU/8")(c,h,!1,null,null,null).exports},mounted:function(){this.getInit(),this.getSixBuildCount(),this.getDevProRank()},data:function(){return{projectDataTotalInit:0,projectName:"",monthData:{title:"新建项目",xAxis:[],series:[]},rankData:{title:"项目统计",xAxis:[],series:[]},pagination:{page:1,total:30,size:10},projectData:[],initProjectSave:[]}},methods:{listFormatter:function(t){return t.list&&t.list.length>=1?t.list.join(","):""},getDevProRank:function(){var t=this;t.$post(i.a.jenkins.getProjectTeamCount,null,function(e){if(e.success&&e.projectTeam&&e.projectTeam.length>0){t.rankData.series=[],t.rankData.xAxis=[];var a=[],i=[];e.projectTeam.forEach(function(t){a.push(t.groupName),i.push(t.projectCount)}),console.log(a,i),t.rankData.xAxis=a,t.rankData.series.push({title:"新建项目",data:i}),console.log(t.rankData),t.$refs.buildrank.drawCharts()}else t.$message.error(e.message),t.rankData.series=[],t.rankData.xAxis=[],t.$refs.buildrank.drawCharts()})},getSixBuildCount:function(){var t=this;t.$post(i.a.jenkins.getBuildCount,null,function(e){if(e.success&&e.buildCount&&e.buildCount.length>0){t.monthData.xAxis=[],t.monthData.series=[];for(var a=0;a<e.buildCount.length;a++)for(var i=a;i<e.buildCount.length;i++)if(Number(e.buildCount[i].monthValue)<Number(e.buildCount[a].monthValue)){var s;s=e.buildCount[a],e.buildCount[a]=e.buildCount[i],e.buildCount[i]=s}for(var n=[],r=[],o=[],l=[],c=[],h=0;h<e.buildCount.length;h++)t.monthData.xAxis.push(e.buildCount[h].monthValue),n.push(e.buildCount[h].notBuilt),r.push(e.buildCount[h].failure),o.push(e.buildCount[h].aborted),l.push(e.buildCount[h].unstable),c.push(e.buildCount[h].success);t.monthData.series=[{title:"notBuilt",data:n},{title:"failure",data:r},{title:"aborted",data:o},{title:"unstable",data:l},{title:"success",data:c}],console.log("月数据",t.monthData),t.$refs.monthbuild.drawCharts()}else t.$message.error(e.message),t.monthData.xAxis=[],t.monthData.series=[],t.$refs.monthbuild.drawCharts()})},tableSearch:function(){var t=this;this.initProjectSave&&this.initProjectSave.length>0&&""!=this.projectName?(this.projectData=this.initProjectSave.filter(function(e){if(e.projectName&&e.projectName.indexOf(t.projectName)>-1)return e}),this.pagination.total=this.projectData.length):this.initProjectSave&&this.initProjectSave.length>0&&""==this.projectName&&(this.projectData=this.initProjectSave,this.pagination.total=this.projectDataTotalInit),console.log(this.projectData)},getInit:function(){var t=this;this.$post(i.a.jenkins.getProjectAllList,{currPage:this.pagination.page,pageSize:this.pagination.size},function(e){e.success?(console.log(e),t.projectData=e.result,t.initProjectSave=e.result,t.pagination.total=Number(e.projectCount),t.projectDataTotalInit=Number(e.projectCount),console.log(e)):(t.$message.warning(e.message),t.projectData=[],t.initProjectSave=[],t.projectDataTotalInit=0)})},handleCurrentChange:function(t){this.$data.pagination.page=t,this.getInit()},handleCreateProject:function(){this.$router.push({path:"/createfirst"})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"test-page"},[a("el-scrollbar",{staticClass:"test-scroll"},[a("div",{staticClass:"test-charts"},[a("div",{staticClass:"charts-left"},[a("div",{staticClass:"charts-head"},[t._v("近6个月新建立项目统计")]),t._v(" "),a("new-project",{ref:"monthbuild",attrs:{id:"monthchart",echartsData:t.monthData,width:"100%",height:"320"}})],1),t._v(" "),a("div",{staticClass:"charts-right"},[a("div",{staticClass:"charts-head"},[t._v("当前研发组工作项目统计")]),t._v(" "),a("project-count",{ref:"buildrank",attrs:{id:"toprank",echartsData:t.rankData,width:"100%",height:"320"}})],1)]),t._v(" "),a("div",{staticClass:"wait-build"},[a("div",{staticClass:"charts-head"},[t._v("项目列表")]),t._v(" "),a("div",{staticClass:"wait-table"},[a("div",{staticClass:"wait-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.projectName,expression:"projectName"}],staticClass:"wait-ipt",attrs:{type:"text",placeholder:"请输入项目名称"},domProps:{value:t.projectName},on:{input:function(e){e.target.composing||(t.projectName=e.target.value)}}}),t._v(" "),a("span",{staticClass:"iconfont i-search",attrs:{title:"查询"},on:{click:t.tableSearch}},[t._v("")]),t._v(" "),a("div",{staticClass:"add-area"},[a("button",{staticClass:"add-btn",on:{click:t.handleCreateProject}},[t._v("添加")])])]),t._v(" "),a("el-table",{ref:"historyTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.projectData,border:"",height:"470"}},[a("el-table-column",{attrs:{prop:"projectName",label:"项目名称","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"list",label:"研发组","min-width":"120",formatter:t.listFormatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"buildStatus",label:"构建风格","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"check-btn"},[t._v("查看")]),t._v(" "),a("button",{staticClass:"edit-btn"},[t._v("编辑")]),t._v(" "),a("button",{staticClass:"delete-btn"},[t._v("详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-page"},[a("div",{staticClass:"pagination-left"},[a("el-pagination",{attrs:{"current-page":t.pagination.page,"page-size":t.pagination.size,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"pagination-right"},[t._v("\n            当前显示"+t._s((t.pagination.page-1)*t.pagination.size+1)+"-"+t._s((t.pagination.page-1)*t.pagination.size+t.projectData.length)+"条记录 "),a("span",[t._v("共"+t._s(t.pagination.total)+"条记录")])])])],1)])])],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(t){a("JC19")},"data-v-f41b0c6a",null);e.default=p.exports},JC19:function(t,e){},z6HW:function(t,e){}});